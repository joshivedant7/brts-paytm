<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
    <title>Brts - Paytm</title>
    <link rel="stylesheet" href="style.css">

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const button = document.getElementById("fs-btn");

            button.addEventListener("click", () => {
                const element = document.documentElement;

                if (element.requestFullscreen) {
                    element.requestFullscreen();
                } else if (element.mozRequestFullScreen) {
                    element.mozRequestFullScreen();
                } else if (element.webkitRequestFullscreen) {
                    element.webkitRequestFullscreen();
                } else if (element.msRequestFullscreen) {
                    element.msRequestFullscreen();
                }
            });
        });
    </script>
    <style>
        #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }
    </style>
</head>

<body>
    <div class="big-container" style="width: 360px;height: 780px;">
        <div class="scrollable">
            <!-- Header Section -->
            <div class="header">
                <a href="index.html"><img src="img/left-arrow.png" alt="Back" class="back-button"></a>
                <div class="apk-logo"><img src="img/Paytm-Logo.wine.png" alt="APK Logo"></div>
                <div class="help" id="fs-btn">Help</div>
            </div>

            <!-- Scrollable Section -->
            <div class="bluecontainer">
                <center>
                    <img src="img/janmitra-logo.png" alt=""
                        style="border-radius: 50%;width: 10vh; margin-bottom: 10px;">
                </center>
                <div class="qr-container">
                    <!-- Journey Information -->
                    <div class="location">
                        <div id="from" style="font-weight: bolder; font-size: larger; padding-right: 5px;">CTM cros..
                        </div>
                        <img src="img/right-arrow.png" alt="Arrow" style="width:19px;">
                        <div id="to" style="font-weight: bolder; font-size: larger; padding-left: 5px;">Sanad Circle..
                        </div>
                    </div>
                    <!-- Ticket Details -->
                    <div class="info1">AC</div>
                    <div class="info1">1 Adult Ticket</div>
                    <!-- Passenger Info -->
                    <div class="passenger-info">
                        <img src="img/man.png" alt="Passenger Icon" style="width: 4vh; padding-right: 5px;"> 1
                    </div>
                    <!-- Payment Info -->
                    <div class="rupee">&#x20B9; 20 <img src="img/check.png" alt="Check" style="width: 4vh;"></div>
                    <div class="mess"
                        style="font-weight: bold; letter-spacing: 1px;font-size: small; margin-bottom: 10px;">
                        TICKET BOOKED SUCCESSFULLY</div>
                    <!-- Date Information -->
                    <div class="date" style="font-size: x-small;">10 Monday 2025, 8:45 PM</div>

                    <hr
                        style="height: 1px;width: 100%;border-width: 0;color: rgb(224, 2, 2);background-color: #3e3d3d2b;">
                    <!-- QR Code -->
                    <!-- <div class="qr-code"></div> -->
                    <!-- Timer Section -->
                    <div class="timer-container">
                        <div class="title">Your ticket is valid for</div>
                        <div class="timer" id="timer" style="font-size: 27px; margin-top: 10px;">02:30:00</div>
                        <div class="timer" style="font-size: xx-small; font-weight: 400;margin-bottom: 10px;">
                            HOURS                MINUTES                   SECONDS</div>
                        <!-- View Ticket Button -->
                        <button class="view-ticket">View Your Ticket</button>
                    </div>
                </div>
            </div>

            <div class="trip-details">
                <h1>Trip Details</h1>

                <div class="info">
                    <div class="heading">OPERATOR</div>
                    <div class="value">BRTS</div>
                </div>

                <div class="info">
                    <div class="heading">CHANGE OVER BUS STOP</div>
                    <div class="value">Iskcon Cross Road</div>
                </div>

                <div class="info">
                    <div class="order-id">Order ID: 12345678901<span
                            style="padding-left: 3px; font-weight:300; color :#007bff;">copy</p></span>
                    </div>

                    <div class="info-note">
                        For any queries regarding QR Ticket, please contact BRTS with Order ID.
                    </div>
                </div>

            </div>

            <div class="payment-details">
                <h1>Payment Details</h1>

                <div class="info">
                    <div class="heading">FARE BREAKUP</div>
                    <div class="value">
                        <span>1 X Adult</span>
                        <span style="color: #333;" class="rupees">&#8377; 20</span>
                    </div>
                </div>

                <div class="info">
                    <div class="heading"></div>
                    <div class="value">
                        <span>TOTAL</span>
                        <span class="rupees">&#8377; 20</span>
                    </div>
                </div>

                <div class="info">
                    <div class="heading" style="padding-bottom: 5px;">PAYMENT MODE</div>
                    <div class="value" style="border: none;">
                        <span style="flex-grow: 1;">UPI Linked Bank Account</span>
                        <span style="color: #333; font-weight: bold;" class="rupees">&#8377; 20</span>
                    </div>
                    <div class="value" style="border: none;">
                        <span style="font-size: small; color: #aaa;">Transaction ID:501009064222</span>

                    </div>
                </div>

            </div>
            <div class="empty" style="height: 80px;"></div>

            <!-- Floating Island Section -->
            <div class="floating">
                <div class="floating-island">
                    <button>
                        <img src="img/home.png" alt="Home">
                        Home
                    </button>
                    <button>
                        <img class="acc" src="img/cashback.png" alt="About" style="width: 40px;
            height: 40px;">
                        Cashback
                    </button>
                    <button>
                        <img src="img/contact.png" alt="Help">
                        Help
                    </button>
                </div>
            </div>
        </div>
        <div id="loader">
            <svg width="120" height="40" viewBox="0 0 300 100">
              <circle cx="40" cy="50" r="16" fill="#002e6e">
                <animate attributeName="r" values="16; 8; 16" dur="0.5s" begin="0s" repeatCount="indefinite"/>
              </circle>
              <circle cx="80" cy="50" r="16" fill="#002e6e">
                <animate attributeName="r" values="16; 8; 16" dur="0.5s" begin="0.05s" repeatCount="indefinite"/>
              </circle>
              <circle cx="120" cy="50" r="16" fill="#002e6e">
                <animate attributeName="r" values="16; 8; 16" dur="0.5s" begin="0.1s" repeatCount="indefinite"/>
              </circle>
              <circle cx="160" cy="50" r="16" fill="#00b9f5">
                <animate attributeName="r" values="16; 8; 16" dur="0.5s" begin="0.15s" repeatCount="indefinite"/>
              </circle>
              <circle cx="200" cy="50" r="16" fill="#00b9f5">
                <animate attributeName="r" values="16; 8; 16" dur="0.5s" begin="0.2s" repeatCount="indefinite"/>
              </circle>
            </svg>
          </div>
        <script>
            let remainingTime = 2 * 60 * 60 + 30 * 60;

            function updateTimer() {
                let timerElement = document.getElementById('timer');
                const hours = String(Math.floor(remainingTime / 3600)).padStart(2, '0');
                const minutes = String(Math.floor((remainingTime % 3600) / 60)).padStart(2, '0');
                const seconds = String(remainingTime % 60).padStart(2, '0');

                timerElement.textContent = `${hours} : ${minutes} : ${seconds}`;

                if (remainingTime > 0) {
                    remainingTime--;
                }
            }

            document.querySelector(".view-ticket").addEventListener("click", function () {
                document.getElementById("loader").style.display = "flex";
                const params = new URLSearchParams(window.location.search);
                setTimeout(() => {window.location.href = `second.html?${params.toString()}`;}, 2200);
            });



            function updatePageFromQueryParams() {
                const params = new URLSearchParams(window.location.search);

                const from = params.get('from') || 'Default From';
                const to = params.get('to') || 'Default To';
                const time = params.get('time');
                const rupee = params.get('rupee') || 'Default Price';

                try {
                    // Parse time input
                    const [hour, minute] = time.split(':').map(Number);

                    remainingTime = hour * 60 * 60 + minute * 60;

                    setInterval(updateTimer, 1000);

                    // Calculate current time - (fix time - input time)
                    const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                    const currentTime = new Date();

                    const fixTime = new Date();
                    fixTime.setHours(3, 0, 0, 0); // Fix time is 03:00

                    const inputTime = new Date();
                    inputTime.setHours(hour, minute, 0, 0);

                    const diffInMilliseconds = fixTime - inputTime;
                    const resultTime = new Date(currentTime - diffInMilliseconds);

                    // Format result time in hh:mm
                    const resultHours = resultTime.getHours().toString().padStart(2, "0");
                    const resultMinutes = resultTime.getMinutes().toString().padStart(2, "0");
                    const formattedResult = `${resultHours}:${resultMinutes}`;

                    // Get today's date
                    const today = new Date();
                    const day = today.getDay();
                    const date = today.getDate();

                    // Construct time display string
                    const timep = `${date} ${dayNames[day]} ${today.getFullYear()}, ${formattedResult}`;

                    // Update UI elements
                    document.getElementById('from').textContent = from;
                    document.getElementById('to').textContent = to;
                    document.querySelector('.date').textContent = timep;
                    document.querySelector('.rupee').innerHTML = `&#8377; ${rupee} <img src="img/check.png" alt="Check" style="width: 4vh;">`;

                    // Update all elements with the 'rupees' class
                    const elements = document.getElementsByClassName('rupees');
                    for (let i = 0; i < elements.length; i++) {
                        elements[i].innerHTML = `&#8377; ${rupee}`;
                    }
                } catch (error) {
                    console.error('Error in updatePageFromQueryParams:', error);
                }
            }

            window.onload = updatePageFromQueryParams;
        </script>
</body>

</html>